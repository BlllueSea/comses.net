{% extends "base.jinja" %}
{% from "common.jinja" import retrieve_introduction, breadcrumb %}

{% block title %}{{ title }}{% endblock %}

{% block introduction %}{{ retrieve_introduction('CoMSES Net Codebase Library') }}{% endblock %}

{% block breadcrumb %}
    {{ breadcrumb([
        {'url': '/', 'description': 'Home'},
        {'url': url('library:codebase-list'), 'description': 'Codebase Library' },
        {'description': title }
        ]) }}
{% endblock %}

{% block content %}
    <div class='row'>
        <div class='col-md-9'>
            <h1 class="pb-4">{{ title }}</h1>
            <div class='metadata'>
                <b>Platform:</b> {{ latest_version.platforms }}
                <b>Version: </b> {{ latest_version.version_number }} <a href='{{latest_version.absolute_url}}'>(View Latest)</a>
                <b>Language:</b> {{ latest_version.programming_languages }}
            </div>
            <div class='tags'>
                {% for tag in tags %}
                    <a class='tag' href='/search?tag={{ tag.name }}'>{{ tag.name }}</a>
                {% endfor %}
            </div>
            <p>
            {{ markdown(description)|safe }}
            </p>
        </div>
        <div class="col-md-3">
            <div class='card-metadata'>
                <div class='card-block'>
                    <small>
                        <b class="card-title">Authors</b>
                        <p class='card-text'>
                            {% for c in all_contributors %}
                                {{ c.name }}
                                {{ c.affiliations }}
                            {% endfor %}
                        </p>
                        <b class="card-title">Publish Date</b>
                        <p class='card-text'>
                            {{ first_published_at }}
                        </p>

                        <b class="card-title">Last Updated</b>
                        <p class='card-text'>
                            {{ last_modified }}
                        </p>

                        <b class="card-title">Downloads: </b>{{ download_count }}
                        <br>
                        <b class="card-title">Status</b>
                        <p class="card-text">
                        {% if peer_reviewed %}
                            <i class='fa fa-trophy fa-2x'></i> Reviewed
                        {% else %}
                            Unreviewed
                        {% endif %}
                        </p>
                    </small>

                </div>
            </div>
            <div class="card-metadata">
                <div class="card-block">
                    <button type="button" class="col-12 my-1 btn btn-primary">Download</button>
                    <button type="button" class="col-12 my-1 btn btn-primary">Follow</button>
                </div>
            </div>
            <div class="card-metadata">
                <div class="card-block">
                    <b>Share</b>
                    <span class="col-2 fa fa-linkedin-square"></span>
                    <span class="col-2 fa fa-facebook-square"></span>
                    <span class="col-2 fa fa-twitter-square"></span>
                    <span class="col-2 fa fa-envelope-square"></span>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
