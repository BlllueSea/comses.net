{% extends "sidebar_layout.jinja" %}
{% from "common.jinja" import breadcrumb, embed_discourse_comments, share_card, user_href %}

{% block title %}Event: {{ title }}{% endblock %}

{% block introduction %}<h1>Community Events</h1>{% endblock %}

{% block top %}
    {{ breadcrumb([
    {'url': url('home:event-list'), 'text': 'Events' },
    {'text': title }
    ]) }}
{% endblock %}

{% block content %}
    <div id='discourse-content'>
        <h1>{{ title }}</h1>
        {{ description|markdown }}
    </div>
    <div class="btn-group">
        {% if has_change_perm %}
            <a type="button" class="btn btn-primary btn-sm" href="{{ url('home:event-update', pk=id) }}">Edit</a>
        {% endif %}
        {% if has_delete_perm %}
            <a type="button" class="btn btn-danger btn-sm" href="{{ url('home:event-detail', pk=id) }}">Delete</a>
        {% endif %}
    </div>
{% endblock %}

{% block sidebar %}
    <div class="card-metadata">
        <div class="card-block">
            <div class='section'>
                <b class="card-title">Contact</b>
                <p class="card-text">{{ user_href(submitter) }}</p>
                <b class="card-title">Last Updated</b>
                <p class="card-text">{{ last_modified }}</p>
                <b class="card-title">Location</b>
                <p class='card-text'>{{ location|default("None specified") }}</p>
                <b class="card-title">Early Registration Deadline</b>
                <p class="card-text">{{ early_registration_deadline|truncate_midnight }}</p>
                <b class="card-title">Submission Deadline</b>
                <p class="card-text">{{ submission_deadline|truncate_midnight }}</p>
                <b class="card-title">Start Date</b>
                <p class="card-text">{{ start_date|truncate_midnight }}</p>
                <b class="card-title">End Date</b>
                <p class="card-text">{{ end_date|truncate_midnight }}</p>
            </div>
        </div>
    </div>
    {{ share_card(absolute_url) }}
{% endblock %}

{% block bottom %}
    <div class="col-12">
        <h4>Comments</h4>
        <div id="discourse-comments"></div>
    </div>
{% endblock %}

{% block js %}
    {{ embed_discourse_comments(true) }}
{% endblock %}
