{% extends "sidebar_layout.jinja" %}
{% from "common.jinja" import item_component, list_page, paginator, breadcrumb, subnav, member_profile_href, search_tag_href %}

{% macro render_user(member_profile, detail_url_name) %}
    <div class="search-result">
        <div class="title">
            <h1>{{ member_profile_href(member_profile) }}<small class="text-muted pull-right">Joined on: {{ member_profile.date_joined }}</small></h1>
            {% if member_profile.avatar is not none %}
                {{ image(member_profile.avatar, "fill-50x50", width=50, height=50, class="img-fluid img-thumbnail d-block rounded-circle") }}
            {% endif %}
        </div>
        {% if member_profile.tags %}
            <div class="tag-list">
                {% for tag in member_profile.tags %}
                    {{ search_tag_href(tag, category='users') }}
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% block title %}Welcome to the CoMSES Net Community{% endblock %}

{% block introduction %}<h1>Community</h1>{% endblock %}

{% block top %}
    {{ breadcrumb([
    {'url': '/community/', 'text': 'Community'},
    {'url': url("home:profile-list"), 'text': 'Users'},
    ])
    }}
    {{ subnav([
    { 'url': '/community/', 'text': 'Community' },
    { 'url': DISCOURSE_BASE_URL, 'text': 'Forum' },
    { 'url': url("home:profile-list"), 'text': 'Users', 'active': True },
    { 'url': url("home:job-list"), 'text': 'Jobs' },
    ])
    }}
{% endblock %}

{% block content %}
    {{ list_page(__all__, render_user, 'home:profile-detail') }}
{% endblock %}

{% block sidebar %}
    <div id="sidebar"></div>
{% endblock %}

{% block bottom %}
    <div class="col">
        {{ paginator('home:profile-list', __all__) }}
    </div>
{% endblock %}

{% block js %}
    {{ render_bundle('profile_list') }}
{% endblock %}
